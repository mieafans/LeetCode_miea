// Author : miea
// Date   : 2014-10-28

/********************************************************************************** 
* 
*The string "PAYPALISHIRING" is written in a zigzag pattern on a given number of rows like this: 
*(you may want to display this pattern in a fixed font for better legibility)
*
*P   A   H   N
*A P L S I I G
*Y   I   R
*And then read line by line: "PAHNAPLSIIGYIR"
*Write the code that will take a string and make this conversion given a number of rows:
*
*string convert(string text, int nRows);
*convert("PAYPALISHIRING", 3) should return "PAHNAPLSIIGYIR".
**********************************************************************************/


#include <string>

using namespace std;

class Solution {
public:
	string convert(string s, int nRows) {
		if(s.empty())
		{
			return "";
		}
		int len = s.size();
		int firstLen = 0;
		int firstGroup = 0;
		std::string strRet ="";
		strRet.resize(len);

		firstGroup = nRows + nRows / 2;

		if(len%firstGroup != 0)
		{
			firstLen = len / firstGroup + 1;
		}
		else
		{
			firstLen = len / firstGroup;
		}

		int turn = 0;
		int loop = 0;
		for(int i = 0; i < len; )
		{
			if(turn % 2 == 0)
			{
				loop = firstGroup;
				for(int j = turn; j < len; j+=loop, i++)
				{
					strRet[i] = s[j];
				}
			}
			else
			{
				for(int j = turn; j < len; )
				{
					strRet[i] = s[j];
					j+= nRows - (turn + 1)/2;
					i++;
					if(j > len)
						break;
					strRet[i] = s[j];
					j+= nRows/2 + (turn +1)/2;
					i++;
				}
			}

			turn++;
		}

		return strRet;
	}
};


int main()
{
	Solution so;
	string ret = so.convert("ABC", 2);   
	return 0;
}

//PAHNAPLSIIGYIR
